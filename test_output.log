Running tests with PYTHONPATH=/home/lchta/Projects/samplemind-ai-v6:
Python version: Python 3.12.3

============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.4.2, pluggy-1.6.0 -- /home/lchta/Projects/samplemind-ai-v6/.venv/bin/python3
cachedir: .pytest_cache
rootdir: /home/lchta/Projects/samplemind-ai-v6
configfile: pytest.ini
plugins: asyncio-1.2.0, anyio-4.11.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 40 items / 2 deselected / 38 selected

tests/unit/core/test_audio_engine.py::TestAudioEngine::test_audio_engine_initialization PASSED [  2%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_load_audio_valid_file PASSED [  5%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_load_audio_nonexistent_file PASSED [  7%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_load_audio_with_target_sample_rate PASSED [ 10%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_analyze_audio_basic PASSED [ 13%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_analyze_audio_detailed PASSED [ 15%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_analyze_audio_caching PASSED [ 18%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_analyze_audio_async PASSED [ 21%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_batch_analyze PASSED [ 23%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_performance_stats PASSED [ 26%]
tests/unit/core/test_audio_engine.py::TestAudioEngine::test_shutdown PASSED [ 28%]
tests/unit/core/test_audio_engine.py::TestAudioFeatures::test_audio_features_initialization PASSED [ 31%]
tests/unit/core/test_audio_engine.py::TestAudioFeatures::test_audio_features_to_dict PASSED [ 34%]
tests/unit/core/test_audio_engine.py::TestAudioFeatures::test_audio_features_similarity PASSED [ 36%]
tests/unit/core/test_audio_engine.py::TestAudioFeatures::test_audio_features_hash_consistency PASSED [ 39%]
tests/unit/core/test_audio_engine.py::TestAudioProcessor::test_normalize_audio PASSED [ 42%]
tests/unit/core/test_audio_engine.py::TestAudioProcessor::test_apply_high_pass_filter PASSED [ 44%]
tests/unit/core/test_audio_engine.py::TestAdvancedFeatureExtractor::test_feature_extractor_initialization PASSED [ 47%]
tests/unit/core/test_audio_engine.py::TestAdvancedFeatureExtractor::test_extract_spectral_features PASSED [ 50%]
tests/unit/core/test_audio_engine.py::TestAdvancedFeatureExtractor::test_extract_rhythm_features PASSED [ 52%]
tests/unit/core/test_audio_engine.py::TestAdvancedFeatureExtractor::test_extract_harmonic_features PASSED [ 55%]
tests/unit/core/test_audio_engine.py::TestAudioEngineIntegration::test_full_analysis_pipeline PASSED [ 57%]
tests/unit/core/test_audio_engine.py::TestAudioEngineIntegration::test_concurrent_analysis PASSED [ 60%]
tests/integration/test_api_auth.py::TestAuthenticationAPI::test_register_user ERROR [ 63%]
tests/integration/test_api_auth.py::TestAuthenticationAPI::test_register_duplicate_user ERROR [ 65%]
tests/integration/test_api_auth.py::TestAuthenticationAPI::test_register_invalid_email ERROR [ 68%]
tests/integration/test_api_auth.py::TestAuthenticationAPI::test_login_success ERROR [ 71%]
tests/integration/test_api_auth.py::TestAuthenticationAPI::test_login_wrong_password ERROR [ 73%]

==================================== ERRORS ====================================
__________ ERROR at setup of TestAuthenticationAPI.test_register_user __________
file /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py, line 12
      async def test_register_user(self, api_client, sample_user_data):
          """Test user registration"""
          response = await api_client.post(
              "/api/v1/auth/register",
              json=sample_user_data
          )

          assert response.status_code == 200
          data = response.json()
          assert "access_token" in data
          assert "refresh_token" in data
          assert "token_type" in data
          assert data["token_type"] == "bearer"
E       fixture 'api_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, async_audio_engine, audio_engine, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_environment, cov, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_openai_producer, monkeypatch, no_cover, performance_timer, pytestconfig, real_openai_producer, record_property, record_testsuite_property, record_xml_attribute, recwarn, sample_audio_features, sample_features_dict, temp_directory, test_audio_samples, test_chromadb, test_config_file, test_mongodb, test_redis, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py:12
_____ ERROR at setup of TestAuthenticationAPI.test_register_duplicate_user _____
file /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py, line 26
      async def test_register_duplicate_user(self, api_client, sample_user_data):
          """Test registering duplicate user"""
          # First registration
          await api_client.post("/api/v1/auth/register", json=sample_user_data)

          # Second registration (should fail)
          response = await api_client.post("/api/v1/auth/register", json=sample_user_data)

          assert response.status_code == 400
          assert "already exists" in response.json()["detail"].lower()
E       fixture 'api_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, async_audio_engine, audio_engine, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_environment, cov, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_openai_producer, monkeypatch, no_cover, performance_timer, pytestconfig, real_openai_producer, record_property, record_testsuite_property, record_xml_attribute, recwarn, sample_audio_features, sample_features_dict, temp_directory, test_audio_samples, test_chromadb, test_config_file, test_mongodb, test_redis, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py:26
_____ ERROR at setup of TestAuthenticationAPI.test_register_invalid_email ______
file /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py, line 37
      async def test_register_invalid_email(self, api_client):
          """Test registration with invalid email"""
          invalid_data = {
              "email": "invalid-email",
              "username": "testuser",
              "password": "TestPassword123!"
          }

          response = await api_client.post("/api/v1/auth/register", json=invalid_data)

          assert response.status_code == 422
E       fixture 'api_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, async_audio_engine, audio_engine, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_environment, cov, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_openai_producer, monkeypatch, no_cover, performance_timer, pytestconfig, real_openai_producer, record_property, record_testsuite_property, record_xml_attribute, recwarn, sample_audio_features, sample_features_dict, temp_directory, test_audio_samples, test_chromadb, test_config_file, test_mongodb, test_redis, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py:37
__________ ERROR at setup of TestAuthenticationAPI.test_login_success __________
file /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py, line 49
      async def test_login_success(self, api_client, sample_user_data):
          """Test successful login"""
          # Register first
          await api_client.post("/api/v1/auth/register", json=sample_user_data)

          # Login
          login_data = {
              "username": sample_user_data["username"],
              "password": sample_user_data["password"]
          }
          response = await api_client.post(
              "/api/v1/auth/login",
              data=login_data,
              headers={"Content-Type": "application/x-www-form-urlencoded"}
          )

          assert response.status_code == 200
          data = response.json()
          assert "access_token" in data
          assert "refresh_token" in data
E       fixture 'api_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, async_audio_engine, audio_engine, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_environment, cov, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_openai_producer, monkeypatch, no_cover, performance_timer, pytestconfig, real_openai_producer, record_property, record_testsuite_property, record_xml_attribute, recwarn, sample_audio_features, sample_features_dict, temp_directory, test_audio_samples, test_chromadb, test_config_file, test_mongodb, test_redis, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py:49
______ ERROR at setup of TestAuthenticationAPI.test_login_wrong_password _______
file /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py, line 70
      async def test_login_wrong_password(self, api_client, sample_user_data):
          """Test login with wrong password"""
          # Register first
          await api_client.post("/api/v1/auth/register", json=sample_user_data)

          # Login with wrong password
          login_data = {
              "username": sample_user_data["username"],
              "password": "WrongPassword123!"
          }
          response = await api_client.post(
              "/api/v1/auth/login",
              data=login_data,
              headers={"Content-Type": "application/x-www-form-urlencoded"}
          )

          assert response.status_code == 401
E       fixture 'api_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, async_audio_engine, audio_engine, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_environment, cov, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_openai_producer, monkeypatch, no_cover, performance_timer, pytestconfig, real_openai_producer, record_property, record_testsuite_property, record_xml_attribute, recwarn, sample_audio_features, sample_features_dict, temp_directory, test_audio_samples, test_chromadb, test_config_file, test_mongodb, test_redis, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py:70
=============================== warnings summary ===============================
tests/unit/core/test_audio_engine.py:292
  /home/lchta/Projects/samplemind-ai-v6/tests/unit/core/test_audio_engine.py:292: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests/integration/test_api_auth.py:7
  /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py:7: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests/integration/test_api_auth.py:147
  /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_api_auth.py:147: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:323
.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:323
.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:323
  /home/lchta/Projects/samplemind-ai-v6/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

src/samplemind/interfaces/api/schemas/auth.py:18
  /home/lchta/Projects/samplemind-ai-v6/src/samplemind/interfaces/api/schemas/auth.py:18: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator("username")

src/samplemind/interfaces/api/schemas/auth.py:25
  /home/lchta/Projects/samplemind-ai-v6/src/samplemind/interfaces/api/schemas/auth.py:25: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator("password")

src/samplemind/interfaces/api/schemas/auth.py:63
  /home/lchta/Projects/samplemind-ai-v6/src/samplemind/interfaces/api/schemas/auth.py:63: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator("new_password")

src/samplemind/interfaces/api/schemas/auth.py:97
  /home/lchta/Projects/samplemind-ai-v6/src/samplemind/interfaces/api/schemas/auth.py:97: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator("username")

.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
  /home/lchta/Projects/samplemind-ai-v6/.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

.venv/lib/python3.12/site-packages/pydantic/fields.py:1093
.venv/lib/python3.12/site-packages/pydantic/fields.py:1093
.venv/lib/python3.12/site-packages/pydantic/fields.py:1093
.venv/lib/python3.12/site-packages/pydantic/fields.py:1093
.venv/lib/python3.12/site-packages/pydantic/fields.py:1093
.venv/lib/python3.12/site-packages/pydantic/fields.py:1093
  /home/lchta/Projects/samplemind-ai-v6/.venv/lib/python3.12/site-packages/pydantic/fields.py:1093: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'unique', 'index'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warn(

.venv/lib/python3.12/site-packages/pydantic/fields.py:1093
  /home/lchta/Projects/samplemind-ai-v6/.venv/lib/python3.12/site-packages/pydantic/fields.py:1093: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'index'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warn(

tests/integration/test_audio_workflow.py:13
  /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_audio_workflow.py:13: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests/integration/test_audio_workflow.py:95
  /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_audio_workflow.py:95: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests/integration/test_audio_workflow.py:161
  /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_audio_workflow.py:161: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests/integration/test_audio_workflow.py:185
  /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_audio_workflow.py:185: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests/integration/test_audio_workflow.py:187
  /home/lchta/Projects/samplemind-ai-v6/tests/integration/test_audio_workflow.py:187: PytestUnknownMarkWarning: Unknown pytest.mark.slow - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.slow

tests/unit/core/test_audio_engine.py::TestAudioEngineIntegration::test_full_analysis_pipeline
tests/unit/core/test_audio_engine.py::TestAudioEngineIntegration::test_concurrent_analysis
  /home/lchta/Projects/samplemind-ai-v6/src/samplemind/core/engine/audio_engine.py:246: DeprecationWarning: Conversion of an array with ndim > 0 to a scalar is deprecated, and will error in future. Ensure you extract a single element from your array before performing this operation. (Deprecated NumPy 1.25.)
    'tempo': float(tempo),

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR tests/integration/test_api_auth.py::TestAuthenticationAPI::test_register_user
ERROR tests/integration/test_api_auth.py::TestAuthenticationAPI::test_register_duplicate_user
ERROR tests/integration/test_api_auth.py::TestAuthenticationAPI::test_register_invalid_email
ERROR tests/integration/test_api_auth.py::TestAuthenticationAPI::test_login_success
ERROR tests/integration/test_api_auth.py::TestAuthenticationAPI::test_login_wrong_password
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 5 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
=========== 23 passed, 2 deselected, 25 warnings, 5 errors in 7.17s ============
