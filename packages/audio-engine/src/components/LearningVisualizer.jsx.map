{"version":3,"file":"LearningVisualizer.jsx","sourceRoot":"","sources":["LearningVisualizer.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport * as tf from '@tensorflow/tfjs';\nimport { NeuroplasticLearning } from '../core/NeuroplasticLearning';\n\nexport interface LearningVisualizerProps {\n  neuroplasticLearning: NeuroplasticLearning;\n  width?: number;\n  height?: number;\n  className?: string;\n}\n\nexport const LearningVisualizer: React.FC<LearningVisualizerProps> = ({\n  neuroplasticLearning,\n  width = 400,\n  height = 200,\n  className = ''\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [isLearning, setIsLearning] = useState(false);\n  const [learningProgress, setLearningProgress] = useState(0);\n  const [styleVector, setStyleVector] = useState<number[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const onTrainingStart = () => {\n      setIsLearning(true);\n      setLearningProgress(0);\n    };\n\n    const onTrainingProgress = (data: any) => {\n      setLearningProgress(Math.min(100, Math.round((data.epoch / 20) * 100)));\n    };\n\n    const onTrainingComplete = async () => {\n      setIsLearning(false);\n      setLearningProgress(100);\n      \n      // Update style vector visualization\n      const vector = await neuroplasticLearning.getStyleVector();\n      if (vector) {\n        setStyleVector(vector[0]);\n      }\n    };\n\n    // Set up event listeners\n    neuroplasticLearning.on('trainingStart', onTrainingStart);\n    neuroplasticLearning.on('trainingProgress', onTrainingProgress);\n    neuroplasticLearning.on('trainingComplete', onTrainingComplete);\n\n    // Initial style vector\n    const initStyleVector = async () => {\n      try {\n        const vector = await neuroplasticLearning.getStyleVector();\n        if (vector) {\n          setStyleVector(vector[0]);\n        }\n      } catch (err) {\n        console.error('Error getting initial style vector:', err);\n        setError('Failed to load style visualization');\n      }\n    };\n    \n    initStyleVector();\n\n    // Cleanup\n    return () => {\n      neuroplasticLearning.off('trainingStart', onTrainingStart);\n      neuroplasticLearning.off('trainingProgress', onTrainingProgress);\n      neuroplasticLearning.off('trainingComplete', onTrainingComplete);\n    };\n  }, [neuroplasticLearning]);\n\n  // Draw the style vector visualization\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || styleVector.length === 0) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    const draw = () => {\n      // Clear canvas\n      ctx.clearRect(0, 0, width, height);\n      \n      // Draw background\n      ctx.fillStyle = 'rgba(17, 24, 39, 0.7)';\n      ctx.fillRect(0, 0, width, height);\n      \n      // Draw grid\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';\n      ctx.lineWidth = 1;\n      \n      // Horizontal grid lines\n      for (let y = 0; y <= height; y += height / 4) {\n        ctx.beginPath();\n        ctx.moveTo(0, y);\n        ctx.lineTo(width, y);\n        ctx.stroke();\n      }\n      \n      // Draw style vector\n      const barWidth = width / styleVector.length;\n      const maxValue = Math.max(...styleVector.map(Math.abs));\n      \n      styleVector.forEach((value, i) => {\n        const x = i * barWidth;\n        const barHeight = (Math.abs(value) / (maxValue || 1)) * (height * 0.8);\n        const y = (height - barHeight) / 2;\n        \n        // Create gradient\n        const gradient = ctx.createLinearGradient(0, y, 0, y + barHeight);\n        gradient.addColorStop(0, '#00F0FF');\n        gradient.addColorStop(1, '#7C3AED');\n        \n        // Draw bar\n        ctx.fillStyle = gradient;\n        ctx.fillRect(x + 2, y, barWidth - 4, barHeight);\n        \n        // Add glow effect\n        ctx.shadowBlur = 15;\n        ctx.shadowColor = '#00F0FF';\n        ctx.shadowOffsetX = 0;\n        ctx.shadowOffsetY = 0;\n        \n        // Draw border\n        ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';\n        ctx.strokeRect(x + 2, y, barWidth - 4, barHeight);\n        \n        // Reset shadow\n        ctx.shadowBlur = 0;\n      });\n      \n      // Draw labels\n      if (isLearning) {\n        ctx.fillStyle = 'white';\n        ctx.font = '12px monospace';\n        ctx.textAlign = 'center';\n        ctx.fillText('Learning...', width / 2, height / 2);\n        \n        // Draw progress bar\n        const progressWidth = width * 0.8;\n        const progressX = (width - progressWidth) / 2;\n        const progressY = height * 0.7;\n        const progressHeight = 8;\n        \n        // Background\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\n        ctx.fillRect(progressX, progressY, progressWidth, progressHeight);\n        \n        // Progress\n        const progressFillWidth = (learningProgress / 100) * progressWidth;\n        const progressGradient = ctx.createLinearGradient(0, progressY, 0, progressY + progressHeight);\n        progressGradient.addColorStop(0, '#00F0FF');\n        progressGradient.addColorStop(1, '#7C3AED');\n        \n        ctx.fillStyle = progressGradient;\n        ctx.fillRect(progressX, progressY, progressFillWidth, progressHeight);\n        \n        // Percentage text\n        ctx.fillStyle = 'white';\n        ctx.font = '10px monospace';\n        ctx.textAlign = 'center';\n        ctx.fillText(`${learningProgress}%`, width / 2, progressY + progressHeight + 15);\n      }\n    };\n    \n    draw();\n  }, [styleVector, isLearning, learningProgress, width, height]);\n\n  if (error) {\n    return (\n      <div className={`bg-gray-900 p-4 rounded-lg text-red-400 ${className}`}>\n        Error: {error}\n      </div>\n    );\n  }\n\n  return (\n    <div className={`relative ${className}`}>\n      <canvas\n        ref={canvasRef}\n        width={width}\n        height={height}\n        className=\"w-full h-full rounded-lg border border-gray-700\"\n      />\n      <div className=\"absolute bottom-2 left-2 text-xs text-gray-400\">\n        Style Vector\n      </div>\n      {isLearning && (\n        <div className=\"absolute top-2 right-2 text-xs bg-cyan-500 text-white px-2 py-1 rounded-full\">\n          LEARNING\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LearningVisualizer;\n"]}